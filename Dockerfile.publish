FROM ghcr.io/astral-sh/uv:python3.13-bookworm-slim AS runner
ENV UV_PYTHON_DOWNLOADS=0

# Install package and then install browsers using the installed package's Playwright
RUN pip install --upgrade pip
ARG VERSION
RUN pip install torrent-search-mcp==$VERSION
ENV PLAYWRIGHT_BROWSERS_PATH=/opt/playwright
ENV XDG_CACHE_HOME=/tmp
RUN mkdir -p /opt/playwright && chmod 755 /opt/playwright && \
    python -m playwright install --with-deps chromium || true
EXPOSE 8000